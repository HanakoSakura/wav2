#define _CRT_SECURE_NO_WARNINGS
#include "WAV.H"

CHUNK fmt,data;
FMT fm;

// 数据
short p[] ={
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,

    16384,16384,16384,16384,
    16384,16384,16384,16384,
    16384,16384,16384,16384,
    16384,16384,16384,16384,
    
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,

    16384,16384,16384,16384,
    16384,16384,16384,16384,
    16384,16384,16384,16384,
    16384,16384,16384,16384,

    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,

    16384,16384,16384,16384,
    16384,16384,16384,16384,
    16384,16384,16384,16384,
    16384,16384,16384,16384,
    
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,

    16384,16384,16384,16384,
    16384,16384,16384,16384,
    16384,16384,16384,16384,
    16384,16384,16384,16384,
    
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,

    16384,16384,16384,16384,
    16384,16384,16384,16384,
    16384,16384,16384,16384,
    16384,16384,16384,16384,
    
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,

    16384,16384,16384,16384,
    16384,16384,16384,16384,
    16384,16384,16384,16384,
    16384,16384,16384,16384,

    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,

    16384,16384,16384,16384,
    16384,16384,16384,16384,
    16384,16384,16384,16384,
    16384,16384,16384,16384,
    
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,
    -16384,-16384,-16384,-16384,

    16384,16384,16384,16384,
    16384,16384,16384,16384,
    16384,16384,16384,16384,
    16384,16384,16384,16384,
    
};

int main(){
    FILE *fp = fopen("./1.wav","rb"),*out =fopen("./2.wav","wb");
    LoadWAV(fp,&fmt,&data);
    ReadFMT(&fmt,&fm,fp);
    printf("%d %d\n",fmt.size,data.size);
    printf("%X %hu %u %u %hu %hu\n",fm.AudioFormat,fm.NumChannels,fm.SampleRate,fm.ByteRate,fm.BlockAlign,fm.BitPerSample);

    InitFMT(&fm,1,1,64000,16);
    InitFMTChunk(&fmt,&fm,16);

    InitChunk(&data,0,"data",sizeof(p),p);

    SaveWAV(out,&fmt,&data);
    return 0;
}